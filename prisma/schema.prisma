generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DATABASE_URL")
}

model User {
  id          Int      @id @default(autoincrement())
  userName    String   @unique
  wbEmailId   String?  @unique
  password    String
  phoneNumber String?
  role        Role     @default(SALES)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Agreement {
  id              Int            @id @default(autoincrement())
  clientName      String
  employeeName    String?
  type            AgreementType?
  poNumber        Int?
  startDate       DateTime?
  endDate         DateTime?
  fileUpload      String?
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  technology      Technology?
  otherTechnology String?
}

model Requirement {
  id              Int      @id @default(autoincrement())
  requirementName String
  companyName     String
  jobDescription  String
  experience      Int
  noticePeriod    Int
  positions       Int
  primarySkills   String
  secondarySkills String
  closePositions  String
  requirementType String
  workLocation    String
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  jdImage         String?
  budget          Int?
}

model Lead {
  id                     Int                @id @default(autoincrement())
  salesName              String
  companyName            String
  numberOfEmployees      Int                @default(0)
  employeeName           String?
  replacementToDate      DateTime?
  replacementRequestDate DateTime?
  createdAt              DateTime           @default(now())
  updatedAt              DateTime           @updatedAt
  status                 LeadStatus         @default(prospective)
  companyNameGST         String?
  companySelect          String?
  companysize            String?
  industry               Industry?
  percentage             Int?
  remarks                String?
  technology             Technology?
  replacementReason      ReplacementReason?
  businessType           String?
  companyID              String?
  technologyOther        String?
  leadType               LeadType
  spocs                  Spoc[]
}

model Spoc {
  id          Int      @id @default(autoincrement())
  name        String
  email       String
  contact     String
  altContact  String?
  designation String
  location    String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  leadId      Int
  lead        Lead     @relation(fields: [leadId], references: [id])
}

enum Role {
  ADMIN
  RECRUITER
  SALES
  ACCOUNT_MANAGER
  SUPERADMIN
  IT_ADMIN
}

enum AgreementType {
  MSA
  NDA
  SOW
  PO
}

enum LeadStatus {
  prospective
  newlead
  existing
  deal
  NEW
}

enum LeadType {
  prospective
  new
  existing
  deal
}

enum ReplacementReason {
  resigned
  performance_issue
  employee_concern
}

enum Technology {
  development
  testing
  devops
  ai_ml
  ai
  other
  digital_marketing
  data_analytics
}

enum Industry {
  it
  finance
  healthcare
  manufacturing
  retail
  education
  telecom
  automobile
  realestate
  logistics
  media
  government
  energy
  consulting
  other
}


// schema.prisma

enum DeviceType {
  LAPTOP
  MOBILE
}

model Device {
  id               String     @id @default(uuid())
  slNo             String
  employeeId       String
  employeeName     String
  employeeStatus   String
  projectWorking   String
  deviceType       DeviceType

  // Common Fields
  modelName        String
  deviceId         String      @unique
  deviceStatus     String      // In Use, Returned, Lost, etc.
  assignedDate     DateTime

  // Laptop-specific fields
  processor        String?     // nullable
  ram              String?
  storage          String?
  osVersion        String?
  accessories      String?     // e.g., Charger, Bag, Dock
  warrantyExpiry   DateTime?

  // Mobile-specific fields
  color            String?
  config           String?     // e.g., 6GB/128GB
  imeiNumber       String?     @unique
  phoneNumber      String?
  simCardNumber    String?
  carrier          String?
  mdmEnrolled      Boolean?
  remarks          String?

  createdAt        DateTime    @default(now())
  updatedAt        DateTime    @updatedAt
}


model Candidate {
  id                        Int      @id @default(autoincrement())
  name                      String
  contactNumber             String
  alternateContactNumber    String? 
  email                     String
  sourcedFrom               String?
  employmentType            String?
  domainExperience          String?
  company                   String?
  role                      String?
  currentCTC                Float?
  expectedCTC               Float?
  workingStatus             String?
  noticePeriod              Int?
  location                  String?
  relocate                  Boolean?
  preferredLocation         String?
  interviewAvailability     String?
  clientName                String?
  demandCode                String?
  interviewTakenBy          String?
  comments                  String[]
  status                    String?
  followUps                 String?
  updatedBy                 String?
  offersAny                 Boolean
  screeningComment          String?
  technicalSkills           String
  relevantExperience        String
  primarySkillExp           String?
  secondarySkillExp         String?
  nammaqaUpdate             String?
  clientInterviewStatus     String?
  feedback                  String?
  resumeLink                String?
  offerDetails              String?
 acmanagerStatus            String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}
